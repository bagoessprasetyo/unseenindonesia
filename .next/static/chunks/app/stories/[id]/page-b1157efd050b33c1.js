(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{6002:function(e,a,s){Promise.resolve().then(s.bind(s,6153))},6153:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return F}});var t=s(7437),r=s(2265),i=s(9376),l=s(1076),n=s(3145),c=s(9205);let d=(0,c.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,c.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var m=s(1769);let x=(0,c.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function h(e){let{story:a}=e,[s,i]=(0,r.useState)(0),[l,c]=(0,r.useState)(!1),h=a.images||[],u=a.sources||[],g=h.length>1;return(0,t.jsxs)("article",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[h.length>0&&!l&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"aspect-video relative bg-gray-100",children:[(0,t.jsx)(n.default,{src:h[s].image_url,alt:h[s].caption||a.title,fill:!0,className:"object-cover",onError:()=>c(!0)}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{i(e=>(e-1+h.length)%h.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-opacity",children:(0,t.jsx)(d,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>{i(e=>(e+1)%h.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-opacity",children:(0,t.jsx)(o,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:h.map((e,a)=>(0,t.jsx)("button",{onClick:()=>i(a),className:"w-2 h-2 rounded-full transition-colors ".concat(a===s?"bg-white":"bg-white bg-opacity-50")},a))})]})]}),h[s].caption&&(0,t.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,t.jsx)("p",{className:"text-sm text-gray-600 italic",children:h[s].caption})})]}),(0,t.jsxs)("div",{className:"p-6",children:[a.historical_figures&&a.historical_figures.length>0&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-indonesia-red bg-opacity-5 rounded-lg border border-indonesia-red border-opacity-20",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-indonesia-red mb-2 flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),"Tokoh Sejarah"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.historical_figures.map((e,a)=>(0,t.jsx)("span",{className:"inline-block px-3 py-1 bg-indonesia-red bg-opacity-10 text-indonesia-red text-sm rounded-full",children:e},a))})]}),(0,t.jsx)("div",{className:"prose prose-lg max-w-none",children:a.content.split("\n").map((e,a)=>(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed mb-4",children:e},a))}),u.length>0&&(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(x,{className:"w-5 h-5"}),"Sumber & Referensi"]}),(0,t.jsx)("div",{className:"space-y-3",children:u.map((e,a)=>(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded",children:e.source_type.replace("_"," ").toUpperCase()}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["#",a+1]})]}),e.source_title&&(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.source_title}),e.source_author&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Oleh: ",e.source_author]}),e.source_description&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.source_description})]}),e.source_url&&(0,t.jsx)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"ml-4 text-indonesia-red hover:text-indonesia-deep-red",children:(0,t.jsx)(x,{className:"w-4 h-4"})})]})},e.id))})]}),a.metadata&&Object.keys(a.metadata).length>0&&(0,t.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,t.jsxs)("details",{className:"group",children:[(0,t.jsx)("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer hover:text-gray-900",children:"Informasi Tambahan"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:JSON.stringify(a.metadata,null,2)})})]})})]})]})}var u=s(2990),g=s(7714),p=s(9322),y=s(1723),b=s(1671),f=s(6595),v=s(3774);let j=(0,c.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var N=s(2208),k=s(5805),w=s(2369);function _(e){var a,s;let{story:r}=e,i=(e=>{switch(e){case 0:return{color:"bg-red-100 text-red-700 border-red-200",icon:p.Z,text:"Baru Dipublikasikan",description:"Cerita baru yang belum diverifikasi"};case 1:return{color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:y.Z,text:"Menarik Perhatian",description:"Mendapat reaksi dari komunitas"};case 2:return{color:"bg-green-100 text-green-700 border-green-200",icon:b.Z,text:"Terverifikasi Lokal",description:"Dikonfirmasi oleh masyarakat setempat"};case 3:return{color:"bg-blue-100 text-blue-700 border-blue-200",icon:m.Z,text:"Didukung Sumber",description:"Memiliki referensi akademik atau dokumen"};case 4:return{color:"bg-purple-100 text-purple-700 border-purple-200",icon:f.Z,text:"Sangat Terpercaya",description:"Multipel verifikasi dan konsensus komunitas"};default:return{color:"bg-gray-100 text-gray-700 border-gray-200",icon:p.Z,text:"Belum Diverifikasi",description:"Status verifikasi tidak diketahui"}}})(r.trust_level||0),l=i.icon,c=Math.ceil(r.content.length/200);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-accent font-bold text-gray-900 mb-4 leading-tight",children:r.title}),r.summary&&(0,t.jsx)("p",{className:"text-lg text-gray-600 mb-6 leading-relaxed",children:r.summary}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:null===(a=r.category)||void 0===a?void 0:a.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Kategori"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(s=r.category)||void 0===s?void 0:s.name)||"Umum"})]})]}),r.location&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Lokasi"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r.location.name})]})]}),r.time_period&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Periode"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r.time_period})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Baca"}),(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[c," menit"]})]})]})]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border ".concat(i.color," mb-6"),children:[(0,t.jsx)(l,{className:"w-4 h-4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:i.text}),(0,t.jsx)("p",{className:"text-xs opacity-75",children:i.description})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[r.view_count||0," views"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[r.verification_count||0," verifications"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Dipublikasi ",(e=>{try{return(0,u.Q)(new Date(e),{addSuffix:!0,locale:g.id})}catch(e){return"Waktu tidak diketahui"}})(r.created_at||"")]})]})]}),r.author&&(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-indonesia-gold rounded-full flex items-center justify-center overflow-hidden",children:r.author.avatar_url?(0,t.jsx)(n.default,{src:r.author.avatar_url,alt:r.author.full_name||"User",width:40,height:40,className:"object-cover"}):(0,t.jsx)(w.Z,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:r.author.full_name||r.author.username}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[r.author.location&&(0,t.jsx)("span",{children:r.author.location}),(0,t.jsxs)("span",{children:[r.author.contribution_count||0," contributions"]}),(0,t.jsxs)("span",{children:["Trust score: ",r.author.trust_score||0]})]})]})]})]})}var Z=s(9501),S=s(3590),C=s(1115);let T=(0,c.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),M=(0,c.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var q=s(1817);let B=(0,c.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var U=s(5526);let E=C.z.object({verificationType:C.z.string().min(1,"Pilih jenis verifikasi"),evidenceText:C.z.string().min(10,"Minimal 10 karakter untuk penjelasan"),evidenceUrl:C.z.string().url("URL tidak valid").optional().or(C.z.literal(""))});function L(e){let{story:a,user:s,onVerificationAdded:i}=e,[l,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),o=(0,U.JU)(),x=a.verifications||[],{register:h,handleSubmit:p,formState:{errors:y},reset:f,setError:j}=(0,Z.cI)({resolver:(0,S.F)(E)}),N=[{value:"local_confirmation",label:"Saya dari daerah ini",icon:v.Z,description:"Konfirmasi sebagai penduduk lokal"},{value:"source_verification",label:"Saya punya sumber",icon:m.Z,description:"Memiliki referensi akademik atau dokumen"},{value:"family_tradition",label:"Tradisi keluarga",icon:k.Z,description:"Cerita serupa dalam keluarga/komunitas"},{value:"visual_evidence",label:"Bukti visual",icon:T,description:"Foto, artifact, atau bukti fisik"},{value:"need_more_info",label:"Butuh info lebih",icon:M,description:"Perlu klarifikasi atau informasi tambahan"}],w=async e=>{if(s){n(!0);try{let{error:t}=await o.from("verifications").insert({story_id:a.id,user_id:s.id,verification_type:e.verificationType,evidence_text:e.evidenceText,evidence_url:e.evidenceUrl||null,is_verified:!1});if(t)throw t;await o.rpc("increment_verification_count",{story_id:a.id}),f(),d(!1),i()}catch(e){j("root",{message:"Failed to submit verification"})}finally{n(!1)}}},_=x.reduce((e,a)=>(e[a.verification_type]=(e[a.verification_type]||0)+1,e),{});return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 text-green-600"}),"Verifikasi Komunitas"]}),(0,t.jsx)("div",{className:"space-y-3 mb-6",children:N.map(e=>{let a=_[e.value]||0,s=e.icon;return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.label})]}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a})]},e.value)})}),s?(0,t.jsx)("div",{className:"space-y-4",children:c?(0,t.jsxs)("form",{onSubmit:p(w),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Verifikasi"}),(0,t.jsxs)("select",{...h("verificationType"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"Pilih jenis verifikasi"}),N.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))]}),y.verificationType&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.verificationType.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Penjelasan"}),(0,t.jsx)("textarea",{...h("evidenceText"),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",placeholder:"Jelaskan dasar verifikasi Anda..."}),y.evidenceText&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.evidenceText.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Bukti (Opsional)"}),(0,t.jsx)("input",{...h("evidenceUrl"),type:"url",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",placeholder:"https://example.com/evidence"}),y.evidenceUrl&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.evidenceUrl.message})]}),y.root&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:y.root.message})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{type:"submit",disabled:l,className:"flex-1 bg-indonesia-red text-white py-2 px-4 rounded-lg font-medium hover:bg-indonesia-deep-red transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l?(0,t.jsx)(q.Z,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(B,{className:"w-4 h-4"}),"Kirim"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{d(!1),f()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"})]})]}):(0,t.jsx)("button",{onClick:()=>d(!0),className:"w-full bg-indonesia-red text-white py-2 px-4 rounded-lg font-medium hover:bg-indonesia-deep-red transition-colors",children:"Tambah Verifikasi"})}):(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center py-4",children:[(0,t.jsx)("a",{href:"/auth",className:"text-indonesia-red hover:underline",children:"Masuk"})," ","untuk menambah verifikasi"]}),x.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Verifikasi Terbaru"}),(0,t.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar",children:x.slice(0,5).map(e=>{let a=N.find(a=>a.value===e.verification_type),s=(null==a?void 0:a.icon)||M;return(0,t.jsxs)("div",{className:"flex gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(s,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:null==a?void 0:a.label}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:(0,u.Q)(new Date(e.created_at||""),{addSuffix:!0,locale:g.id})})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.evidence_text}),e.evidence_url&&(0,t.jsx)("a",{href:e.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indonesia-red hover:underline",children:"Lihat bukti"})]})]},e.id)})})]})]})}var z=s(9317),P=s(8778);function D(e){var a;let{currentStoryId:s,categoryId:l,locationId:n}=e,[c,d]=(0,r.useState)([]),[o,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)("category"),u=(0,i.useRouter)(),g=(0,U.JU)();(0,r.useEffect)(()=>{p()},[s,l,n,x]);let p=async()=>{m(!0);try{let e=g.from("stories").select("\n          *,\n          category:categories(*),\n          location:locations(*),\n          author:profiles(*),\n          images:story_images(*)\n        ").eq("status","published").neq("id",s).limit(6);switch(x){case"category":l&&(e=e.eq("category_id",l));break;case"location":n&&(e=e.eq("location_id",n));break;case"recent":e=e.order("created_at",{ascending:!1})}"recent"!==x&&(e=e.order("view_count",{ascending:!1}));let{data:a,error:t}=await e;if(t)throw t;d(a||[])}catch(e){console.error("Error loading related stories:",e),d([])}finally{m(!1)}},b=e=>{u.push("/stories/".concat(e.id))},f=[{key:"category",label:"Kategori Serupa",icon:z.Z,disabled:!l},{key:"location",label:"Lokasi Sama",icon:v.Z,disabled:!n},{key:"recent",label:"Terbaru",icon:y.Z,disabled:!1}];return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cerita Terkait"}),(0,t.jsx)("div",{className:"flex border-b border-gray-200 mb-4",children:f.map(e=>{let a=e.icon;return(0,t.jsxs)("button",{onClick:()=>!e.disabled&&h(e.key),disabled:e.disabled,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat(x===e.key?"border-indonesia-red text-indonesia-red":e.disabled?"border-transparent text-gray-400 cursor-not-allowed":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(a,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.key)})}),o?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-20 bg-gray-200 rounded-lg"})},a))}):c.length>0?(0,t.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,t.jsx)(P.E,{story:e,onClick:()=>b(e),compact:!0,showAuthor:!1},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(null===(a=f.find(e=>e.key===x))||void 0===a?void 0:a.icon)&&r.createElement(f.find(e=>e.key===x).icon,{className:"w-6 h-6 text-gray-400"})}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["category"===x&&"Belum ada cerita lain dalam kategori ini","location"===x&&"Belum ada cerita lain dari lokasi ini","recent"===x&&"Belum ada cerita terbaru"]})]}),c.length>0&&(0,t.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,t.jsx)("button",{onClick:()=>{"category"===x&&l?u.push("/explore?category=".concat(l)):"location"===x&&n?u.push("/explore?location=".concat(n)):u.push("/explore")},className:"w-full text-center text-sm text-indonesia-red hover:text-indonesia-deep-red font-medium py-2 hover:bg-red-50 rounded-lg transition-colors",children:"Lihat Semua Cerita"})})]})}var V=s(8655);let J=(0,c.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),O=(0,c.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function F(){let[e,a]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),o=(0,i.useParams)(),m=(0,i.useRouter)(),{user:x}=(0,V.a)(),u=(0,U.JU)(),g=o.id;(0,r.useEffect)(()=>{p(),y()},[g]);let p=async()=>{try{let{data:e,error:s}=await u.from("stories").select("\n          *,\n          category:categories(*),\n          location:locations(*),\n          author:profiles(*),\n          images:story_images(*),\n          sources:story_sources(*),\n          verifications:verifications(\n            *,\n            user:profiles(*)\n          )\n        ").eq("id",g).eq("status","published").single();if(s)throw s;a(e)}catch(e){d("Story not found"),console.error("Error loading story:",e)}finally{n(!1)}},y=async()=>{await u.rpc("increment_view_count",{story_id:g})},b=async()=>{if(navigator.share&&e)try{await navigator.share({title:e.title,text:e.summary||e.content.substring(0,100)+"...",url:window.location.href})}catch(e){console.log("Share cancelled")}else navigator.clipboard.writeText(window.location.href)};return s?(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(q.Z,{className:"w-8 h-8 animate-spin text-indonesia-red"})})}):c||!e?(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Story Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"The story you're looking for doesn't exist."}),(0,t.jsx)("button",{onClick:()=>m.push("/"),className:"bg-indonesia-red text-white px-4 py-2 rounded-lg hover:bg-indonesia-deep-red",children:"Back to Home"})]})})}):(0,t.jsx)(l.Z,{children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("button",{onClick:()=>m.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(J,{className:"w-4 h-4"}),"Back"]}),(0,t.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-indonesia-red border border-indonesia-red rounded-lg hover:bg-red-50",children:[(0,t.jsx)(O,{className:"w-4 h-4"}),"Share"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(_,{story:e}),(0,t.jsx)(h,{story:e})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(L,{story:e,user:x,onVerificationAdded:p}),(0,t.jsx)(D,{currentStoryId:e.id,categoryId:e.category_id,locationId:e.location_id})]})]})]})})}}},function(e){e.O(0,[523,602,177,184,971,117,744],function(){return e(e.s=6002)}),_N_E=e.O()}]);