(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{7985:function(e,t,r){Promise.resolve().then(r.bind(r,2355))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2265);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:r,strokeWidth:l?24*Number(o)/Number(i):o,className:n("lucide",u),...m},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:l,...u}=r;return(0,a.createElement)(o,{ref:s,iconNode:t,className:n("lucide-".concat(i(e)),l),...u})});return r.displayName="".concat(e),r}},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),i=r(2265),n=r(9376),s=r(5526),o=r(1817),l=r(1671);let u=(0,r(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function c(){let[e,t]=(0,i.useState)("loading"),[r,c]=(0,i.useState)(""),d=(0,n.useRouter)(),m=(0,n.useSearchParams)(),h=(0,s.JU)();return(0,i.useEffect)(()=>{(async()=>{try{var e,r,a,i,n,s,o,l,u;let f=m.get("code"),g=m.get("error"),p=m.get("error_description");if(g){t("error"),c(p||"Login gagal, coba lagi"),setTimeout(()=>d.push("/auth"),3e3);return}if(f){let{data:o,error:l}=await h.auth.exchangeCodeForSession(f);if(l){t("error"),c("Proses login gagal, coba lagi"),setTimeout(()=>d.push("/auth"),3e3);return}if(o.user){let{data:l,error:u}=await h.from("profiles").select("*").eq("id",o.user.id).single();if(u&&"PGRST116"===u.code){let{error:t}=await h.from("profiles").insert({id:o.user.id,username:(null===(e=o.user.user_metadata)||void 0===e?void 0:e.preferred_username)||(null===(r=o.user.email)||void 0===r?void 0:r.split("@")[0])||"",full_name:(null===(a=o.user.user_metadata)||void 0===a?void 0:a.full_name)||(null===(i=o.user.user_metadata)||void 0===i?void 0:i.name)||"",avatar_url:(null===(n=o.user.user_metadata)||void 0===n?void 0:n.avatar_url)||(null===(s=o.user.user_metadata)||void 0===s?void 0:s.picture)||null});t&&console.error("Error creating profile:",t)}t("success"),c("Login berhasil! Mengalihkan..."),setTimeout(()=>d.push("/"),1500);return}}let x=m.get("type");if("signup"===x){let{data:{user:e},error:r}=await h.auth.getUser();if(r||!e){t("error"),c("Konfirmasi email gagal"),setTimeout(()=>d.push("/auth"),3e3);return}let{data:a,error:i}=await h.from("profiles").select("*").eq("id",e.id).single();if(i&&"PGRST116"===i.code){let{error:t}=await h.from("profiles").insert({id:e.id,username:(null===(o=e.email)||void 0===o?void 0:o.split("@")[0])||"",full_name:(null===(l=e.user_metadata)||void 0===l?void 0:l.full_name)||"",location:(null===(u=e.user_metadata)||void 0===u?void 0:u.location)||null});t&&console.error("Error creating profile:",t)}t("success"),c("Email berhasil dikonfirmasi! Mengalihkan..."),setTimeout(()=>d.push("/"),1500);return}t("success"),c("Mengalihkan..."),setTimeout(()=>d.push("/"),1e3)}catch(e){console.error("Auth callback error:",e),t("error"),c("Terjadi kesalahan, coba lagi"),setTimeout(()=>d.push("/auth"),3e3)}})()},[m,d,h]),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indonesia-ocean-blue to-indonesia-forest-green flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md text-center",children:["loading"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 animate-spin text-indonesia-red mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Memproses..."}),(0,a.jsx)("p",{className:"text-gray-600",children:"Mohon tunggu sebentar"})]}),"success"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Berhasil!"}),(0,a.jsx)("p",{className:"text-gray-600",children:r})]}),"error"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Terjadi Kesalahan"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:r}),(0,a.jsx)("button",{onClick:()=>d.push("/auth"),className:"bg-indonesia-red text-white px-6 py-2 rounded-lg hover:bg-indonesia-deep-red transition-colors",children:"Kembali ke Login"})]})]})})}},5526:function(e,t,r){"use strict";r.d(t,{IG:function(){return u},JU:function(){return l},Ry:function(){return c},Yb:function(){return d}});var a=r(7026),i=r(5452);let n="https://gaizwlstaujuiyxofkww.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdhaXp3bHN0YXVqdWl5eG9ma3d3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1NzcyMjMsImV4cCI6MjA2NDE1MzIyM30.34gO2ib2nbu6ZllpAhgoPoGDty_wnb6T0MYf7-ftXFw";if(!n||!s)throw Error("Missing Supabase environment variables");let o=(0,a.eI)(n,s,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),l=()=>(0,i.createClientComponentClient)(),u=async e=>{let{data:t,error:r}=await o.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat("http://localhost:3000","/auth/callback")}});return{data:t,error:r}},c=async(e,t)=>{let{data:r,error:a}=await o.auth.signInWithPassword({email:e,password:t});return{data:r,error:a}},d=async(e,t,r)=>{let{data:a,error:i}=await o.auth.signUp({email:e,password:t,options:{data:r,emailRedirectTo:"".concat("http://localhost:3000","/auth/callback")}});return{data:a,error:i}}}},function(e){e.O(0,[523,971,117,744],function(){return e(e.s=7985)}),_N_E=e.O()}]);