(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6109:function(e,t,n){Promise.resolve().then(n.bind(n,7284))},9205:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:n,strokeWidth:l?24*Number(i)/Number(r):i,className:s("lucide",c),...m},[...u.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let n=(0,a.forwardRef)((n,o)=>{let{className:l,...c}=n;return(0,a.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(r(e)),l),...c})});return n.displayName="".concat(e),n}},1769:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},2208:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1817:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2369:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7284:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(7437),r=n(2265),s=n(9376),o=n(1076),i=n(2520),l=n.n(i),c=n(2048),d=n(9205);let u=(0,d.Z)("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]),m=(0,d.Z)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);var x=n(8728);let p=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),g=(0,d.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),h=(0,d.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);function y(e){let{mapStyle:t,onMapStyleChange:n,showHeatmap:s,onToggleHeatmap:o,onFitToStories:i,storyCount:l}=e,[d,y]=(0,r.useState)(!1),f=[{id:"mapbox://styles/mapbox/streets-v12",name:"Streets",icon:c.Z,description:"Classic street map"},{id:"mapbox://styles/mapbox/satellite-v9",name:"Satellite",icon:u,description:"Satellite imagery"},{id:"mapbox://styles/mapbox/outdoors-v12",name:"Outdoors",icon:m,description:"Topographic features"},{id:"mapbox://styles/mapbox/light-v11",name:"Light",icon:x.Z,description:"Minimal light theme"}],v=f.find(e=>e.id===t);return(0,a.jsxs)("div",{className:"absolute top-4 right-4 space-y-2 z-10",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>y(!d),className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3 hover:bg-gray-50 flex items-center gap-2 min-w-32",children:[v&&(0,a.jsx)(v.icon,{className:"w-4 h-4 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(null==v?void 0:v.name)||"Map Style"}),(0,a.jsx)(p,{className:"w-4 h-4 text-gray-400"})]}),d&&(0,a.jsx)("div",{className:"absolute top-full right-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 py-2 min-w-48 z-20",children:f.map(e=>{let r=e.icon;return(0,a.jsxs)("button",{onClick:()=>{n(e.id),y(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-3 ".concat(t===e.id?"bg-indonesia-red bg-opacity-5 text-indonesia-red":""),children:[(0,a.jsx)(r,{className:"w-4 h-4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.id)})})]}),(0,a.jsxs)("button",{onClick:()=>o(!s),className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3 hover:bg-gray-50 flex items-center gap-2 ".concat(s?"bg-indonesia-red text-white":""),title:"Toggle story density heatmap",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Heatmap"})]}),(0,a.jsxs)("button",{onClick:i,className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3 hover:bg-gray-50 flex items-center gap-2",title:"Fit map to show all stories",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Fit All"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-indonesia-red",children:l}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Stories"})]})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>y(!1)})]})}function f(e){var t;let{story:n,onClick:a}=e,r=document.createElement("div");r.className="story-marker cursor-pointer";let s={0:20,1:22,2:24,3:26,4:28}[n.trust_level||0]||20,o={0:"#EF4444",1:"#F59E0B",2:"#10B981",3:"#3B82F6",4:"#8B5CF6"}[n.trust_level||0]||"#6B7280",i=(null===(t=n.category)||void 0===t?void 0:t.icon)||"\uD83D\uDCCD";return r.style.width="".concat(s,"px"),r.style.height="".concat(s,"px"),r.style.transformOrigin="center center",r.style.position="absolute",r.style.top="0",r.style.left="0",r.innerHTML='\n    <div class="relative transition-transform duration-200 hover:scale-110" style="transform-origin: center center;">\n      <!-- Main marker circle -->\n      <div \n        class="rounded-full border-2 border-white shadow-lg flex items-center justify-center"\n        style="\n          width: '.concat(s,"px; \n          height: ").concat(s,"px; \n          background-color: ").concat(o,';\n        "\n      >\n        <span style="font-size: ').concat(.5*s,'px; line-height: 1;">\n          ').concat(i,"\n        </span>\n      </div>\n      \n      <!-- Verification count badge -->\n      ").concat((n.verification_count||0)>0?'\n        <div \n          class="absolute -top-1 -right-1 bg-white text-xs font-bold rounded-full border border-gray-300 flex items-center justify-center"\n          style="\n            min-width: 16px; \n            height: 16px; \n            font-size: 10px;\n            color: '.concat(o,';\n          "\n        >\n          ').concat(n.verification_count,"\n        </div>\n      "):"","\n      \n      <!-- Pulse animation for high verification -->\n      ").concat((n.verification_count||0)>=5?'\n        <div \n          class="absolute inset-0 rounded-full animate-ping"\n          style="background-color: '.concat(o,'; opacity: 0.4;"\n        ></div>\n      '):"","\n    </div>\n  "),r.addEventListener("click",e=>{e.stopPropagation(),a()}),r.addEventListener("dblclick",e=>{e.stopPropagation();let t=new CustomEvent("zoomToStory",{detail:{story:n}});window.dispatchEvent(t)}),r.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation();let t=document.createElement("div");t.className="fixed bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-50",t.style.left="".concat(e.clientX,"px"),t.style.top="".concat(e.clientY,"px"),t.innerHTML='\n      <button class="w-full px-4 py-2 text-sm hover:bg-gray-50 text-left">View Story</button>\n      <button class="w-full px-4 py-2 text-sm hover:bg-gray-50 text-left">Share Location</button>\n      <button class="w-full px-4 py-2 text-sm hover:bg-gray-50 text-left">Get Directions</button>\n    ',document.body.appendChild(t);let n=()=>{document.body.removeChild(t),document.removeEventListener("click",n)};setTimeout(()=>document.addEventListener("click",n),0)}),r}function v(e){let{center:t,zoom:n,stories:s,onStoryClick:o,onMapClick:i,selectedTrustLevels:c=[0,1,2,3,4],selectedCategories:d=[]}=e,u=(0,r.useRef)(null),m=(0,r.useRef)(null),x=(0,r.useRef)([]),[p,g]=(0,r.useState)(!1),[h,v]=(0,r.useState)("mapbox://styles/mapbox/streets-v12"),[b,w]=(0,r.useState)(!1),j=s.filter(e=>{let t=c.includes(e.trust_level||0),n=0===d.length||e.category_id&&d.includes(e.category_id);return t&&n});(0,r.useEffect)(()=>{if(!u.current||m.current)return;m.current=new(l()).Map({container:u.current,style:h,center:[t[1],t[0]],zoom:n,attributionControl:!1}),m.current.addControl(new(l()).NavigationControl,"top-right"),m.current.addControl(new(l()).GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-right"),m.current.on("click",e=>{i(e.lngLat.lng,e.lngLat.lat)}),m.current.on("load",()=>{g(!0),k()});let e=e=>{let{story:t}=e.detail;if(m.current&&t){let e=t.latitude,n=t.longitude;e&&n&&m.current.flyTo({center:[n,e],zoom:15,duration:2e3})}};return window.addEventListener("zoomToStory",e),()=>{window.removeEventListener("zoomToStory",e),m.current&&(m.current.remove(),m.current=null)}},[]);let k=()=>{m.current&&(s.map(e=>{if(!e.coordinates)return null;let t=e.coordinates;return t.coordinates?{type:"Feature",properties:{id:e.id,title:e.title,trust_level:e.trust_level||0,verification_count:e.verification_count||0},geometry:{type:"Point",coordinates:t.coordinates}}:null}).filter(Boolean),m.current.addLayer({id:"stories-heatmap-layer",type:"heatmap",source:"stories-heatmap",maxzoom:15,paint:{"heatmap-weight":["interpolate",["linear"],["get","verification_count"],0,0,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,15,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(255, 255, 255, 0)",.2,"rgb(255, 215, 0)",.4,"rgb(255, 165, 0)",.6,"rgb(255, 69, 0)",.8,"rgb(255, 0, 0)",1,"rgb(139, 0, 0)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,15,20]},layout:{visibility:"none"}}))};(0,r.useEffect)(()=>{m.current&&p&&m.current.setStyle(h)},[h,p]),(0,r.useEffect)(()=>{m.current&&p&&m.current.easeTo({center:[t[1],t[0]],zoom:n,duration:1e3})},[t,n,p]),(0,r.useEffect)(()=>{if(!m.current||!p)return;let e=b?"visible":"none";m.current.setLayoutProperty("stories-heatmap-layer","visibility",e)},[b,p]),(0,r.useEffect)(()=>{m.current&&p&&(x.current.forEach(e=>e.remove()),x.current=[],console.log("Adding markers for stories:",j.length),j.forEach(e=>{var t,n,a,r,s,i;console.log("Processing story:",e.title),console.log("Story object:",e);let c=e.latitude,d=e.longitude;if(console.log("Extracted lat/lng:",c,d),null!==c&&null!==d&&void 0!==c&&void 0!==d){console.log("Using extracted coordinates:",d,c);let t=f({story:e,onClick:()=>o(e)}),n=new(l()).Marker({element:t,anchor:"center",offset:[0,0]}).setLngLat([d,c]).addTo(m.current);console.log("Added marker at:",d,c);let a=new(l()).Popup({closeButton:!1,closeOnClick:!1,offset:15}).setHTML('\n          <div class="p-3 max-w-xs">\n            <div class="flex items-center gap-2 mb-2">\n              <span class="text-lg">'.concat((null===(r=e.category)||void 0===r?void 0:r.icon)||"\uD83D\uDCCD",'</span>\n              <span class="text-xs px-2 py-1 bg-indonesia-red bg-opacity-10 text-indonesia-red rounded-full">\n                ').concat((null===(s=e.category)||void 0===s?void 0:s.name)||"Umum",'\n              </span>\n            </div>\n            <h3 class="font-semibold text-sm mb-1 line-clamp-2">').concat(e.title,'</h3>\n            <p class="text-xs text-gray-600 mb-2 line-clamp-3">\n              ').concat(e.summary||e.content.substring(0,100)+"...",'\n            </p>\n            <div class="flex items-center justify-between text-xs">\n              <span class="text-gray-500">').concat((null===(i=e.location)||void 0===i?void 0:i.name)||"",'</span>\n              <div class="flex items-center gap-1">\n                <span class="w-2 h-2 rounded-full ').concat(N(e.trust_level||0),'"></span>\n                <span class="text-gray-500">').concat(e.verification_count||0," verifikasi</span>\n              </div>\n            </div>\n          </div>\n        "));t.addEventListener("mouseenter",()=>{a.setLngLat([d,c]).addTo(m.current)}),t.addEventListener("mouseleave",()=>{a.remove()}),x.current.push(n);return}if(console.log("No extracted coordinates, trying fallback..."),!e.coordinates){console.log("No coordinates for story:",e.title);return}let u=e.coordinates;if(console.log("Coords object:",u),!u.coordinates){console.log("No coordinates.coordinates for story:",e.title);return}let[p,g]=u.coordinates;console.log("Extracted coordinates:",p,g);let h=f({story:e,onClick:()=>o(e)}),y=new(l()).Marker({element:h,anchor:"center",offset:[0,0]}).setLngLat([p,g]).addTo(m.current);console.log("Added marker at:",p,g);let v=new(l()).Popup({closeButton:!1,closeOnClick:!1,offset:15}).setHTML('\n        <div class="p-3 max-w-xs">\n          <div class="flex items-center gap-2 mb-2">\n            <span class="text-lg">'.concat((null===(t=e.category)||void 0===t?void 0:t.icon)||"\uD83D\uDCCD",'</span>\n            <span class="text-xs px-2 py-1 bg-indonesia-red bg-opacity-10 text-indonesia-red rounded-full">\n              ').concat((null===(n=e.category)||void 0===n?void 0:n.name)||"Umum",'\n            </span>\n          </div>\n          <h3 class="font-semibold text-sm mb-1 line-clamp-2">').concat(e.title,'</h3>\n          <p class="text-xs text-gray-600 mb-2 line-clamp-3">\n            ').concat(e.summary||e.content.substring(0,100)+"...",'\n          </p>\n          <div class="flex items-center justify-between text-xs">\n            <span class="text-gray-500">').concat((null===(a=e.location)||void 0===a?void 0:a.name)||"",'</span>\n            <div class="flex items-center gap-1">\n              <span class="w-2 h-2 rounded-full ').concat(N(e.trust_level||0),'"></span>\n              <span class="text-gray-500">').concat(e.verification_count||0," verifikasi</span>\n            </div>\n          </div>\n        </div>\n      "));h.addEventListener("mouseenter",()=>{v.setLngLat([p,g]).addTo(m.current)}),h.addEventListener("mouseleave",()=>{v.remove()}),x.current.push(y)}),console.log("Total markers added:",x.current.length))},[j,p,o]);let N=e=>({0:"bg-red-500",1:"bg-yellow-500",2:"bg-green-500",3:"bg-blue-500",4:"bg-purple-500"})[e]||"bg-gray-500";return(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("div",{ref:u,className:"w-full h-full"}),(0,a.jsx)(y,{mapStyle:h,onMapStyleChange:v,showHeatmap:b,onToggleHeatmap:w,onFitToStories:()=>{if(!m.current||0===j.length)return;let e=j.map(e=>{let t=e.latitude,n=e.longitude;if(t&&n)return[n,t];if(!e.coordinates)return null;let a=e.coordinates;return a.coordinates?[a.coordinates[0],a.coordinates[1]]:null}).filter(Boolean);if(0===e.length)return;let t=e.reduce((e,t)=>e.extend(t),new(l()).LngLatBounds(e[0],e[0]));m.current.fitBounds(t,{padding:50,maxZoom:15})},storyCount:j.length}),!p&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indonesia-red mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Memuat peta..."})]})})]})}n(4982),l().accessToken="pk.eyJ1IjoiYmFnb2Vzc3ByYXNldHlvIiwiYSI6ImNtYmFjM21uZjE0bzEyanE1MWV5a3Eycm4ifQ.jXW_8E_pEIcJNjW1n6y4uw";var b=n(8778);let w=(0,d.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var j=n(2489);function k(e){let{categories:t,selectedCategory:n,onCategoryChange:s}=e,[o,i]=(0,r.useState)(!1),l=o?t:t.slice(0,6);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>s(null),className:"w-full flex items-center justify-between p-3 rounded-lg border transition-colors ".concat(null===n?"bg-indonesia-red text-white border-indonesia-red":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDDFAï¸"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Semua Kategori"})]}),null===n&&(0,a.jsx)(w,{className:"w-4 h-4"})]}),(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"w-full flex items-center justify-between p-3 rounded-lg border transition-colors ".concat(n===e.id?"bg-indonesia-red text-white border-indonesia-red":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-xs opacity-75 line-clamp-1",children:e.description})]})]}),n===e.id&&(0,a.jsx)(w,{className:"w-4 h-4"})]},e.id))}),t.length>6&&(0,a.jsx)("button",{onClick:()=>i(!o),className:"w-full text-center text-sm text-indonesia-red hover:text-indonesia-deep-red font-medium py-2",children:o?"Tampilkan Lebih Sedikit":"Tampilkan ".concat(t.length-6," Lainnya")}),n&&(0,a.jsxs)("button",{onClick:()=>s(null),className:"w-full flex items-center justify-center gap-2 p-2 text-sm text-gray-500 hover:text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Hapus Filter"]})]})}var N=n(8655),C=n(5526),E=n(1817),L=n(3774);let Z=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function M(){let[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)([-2.5489,118.0149]),[p,g]=(0,r.useState)(5),{user:h}=(0,N.a)(),y=(0,s.useRouter)(),f=(0,C.JU)();(0,r.useEffect)(()=>{w()},[]);let w=async()=>{try{let{data:e}=await f.from("categories").select("*").order("name"),{data:n}=await f.rpc("get_stories_with_coordinates_simple").limit(20);i(e||[]),t(n||[])}catch(e){console.error("Error loading data:",e)}finally{u(!1)}},j=e=>{if(e.coordinates){let t=e.coordinates;t.coordinates&&(x([t.coordinates[1],t.coordinates[0]]),g(12))}y.push("/stories/".concat(e.id))};return d?(0,a.jsx)(o.Z,{children:(0,a.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"w-8 h-8 animate-spin text-indonesia-red"})})}):(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"h-screen flex",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(v,{center:m,zoom:p,stories:e,onStoryClick:j,onMapClick:(e,t)=>{console.log("Map clicked:",{lng:e,lat:t})}}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-4 z-10 max-w-sm",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 text-indonesia-red"}),"Filter Kategori"]}),(0,a.jsx)(k,{categories:n,selectedCategory:l,onCategoryChange:c})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg px-4 py-2 z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(Z,{className:"w-4 h-4 text-indonesia-red"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.length," cerita ditemukan"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.filter(e=>e.latitude&&e.longitude).length," dengan koordinat"]})]})]}),(0,a.jsxs)("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-accent font-bold text-gray-900 mb-2",children:"Cerita Terbaru"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Temukan sejarah tersembunyi dari seluruh nusantara"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:(0,a.jsx)("div",{className:"p-4 space-y-4",children:e.length>0?e.map(e=>(0,a.jsx)(b.E,{story:e,onClick:()=>j(e),compact:!0},e.id)):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(L.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Belum ada cerita untuk kategori ini"})]})})}),h&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:()=>y.push("/stories/new"),className:"w-full bg-indonesia-red text-white py-3 px-4 rounded-lg font-medium hover:bg-indonesia-deep-red transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4"}),"Bagikan Cerita Anda"]})})]})]})})}},4982:function(){}},function(e){e.O(0,[508,415,523,177,184,971,117,744],function(){return e(e.s=6109)}),_N_E=e.O()}]);