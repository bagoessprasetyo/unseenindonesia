(()=>{var e={};e.id=458,e.ids=[458],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8080:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o}),t(9970),t(817),t(5866);var a=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["stories",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9970)),"/Users/bagoessprasetyo/Documents/react/unseenindonesia/src/app/stories/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,817)),"/Users/bagoessprasetyo/Documents/react/unseenindonesia/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bagoessprasetyo/Documents/react/unseenindonesia/src/app/stories/[id]/page.tsx"],x="/stories/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/stories/[id]/page",pathname:"/stories/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3337:(e,s,t)=>{Promise.resolve().then(t.bind(t,160))},160:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var a=t(326),r=t(7577),i=t.n(r),n=t(5047),l=t(6239),c=t(6226),o=t(2881);let d=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),x=(0,o.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var m=t(6343);let u=(0,o.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function h({story:e}){let[s,t]=(0,r.useState)(0),[i,n]=(0,r.useState)(!1),l=e.images||[],o=e.sources||[],h=l.length>1;return(0,a.jsxs)("article",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[l.length>0&&!i&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"aspect-video relative bg-gray-100",children:[a.jsx(c.default,{src:l[s].image_url,alt:l[s].caption||e.title,fill:!0,className:"object-cover",onError:()=>n(!0)}),h&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{t(e=>(e-1+l.length)%l.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-opacity",children:a.jsx(d,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{t(e=>(e+1)%l.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-opacity",children:a.jsx(x,{className:"w-5 h-5"})}),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:l.map((e,r)=>a.jsx("button",{onClick:()=>t(r),className:`w-2 h-2 rounded-full transition-colors ${r===s?"bg-white":"bg-white bg-opacity-50"}`},r))})]})]}),l[s].caption&&a.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:a.jsx("p",{className:"text-sm text-gray-600 italic",children:l[s].caption})})]}),(0,a.jsxs)("div",{className:"p-6",children:[e.historical_figures&&e.historical_figures.length>0&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-indonesia-red bg-opacity-5 rounded-lg border border-indonesia-red border-opacity-20",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-indonesia-red mb-2 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Tokoh Sejarah"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.historical_figures.map((e,s)=>a.jsx("span",{className:"inline-block px-3 py-1 bg-indonesia-red bg-opacity-10 text-indonesia-red text-sm rounded-full",children:e},s))})]}),a.jsx("div",{className:"prose prose-lg max-w-none",children:e.content.split("\n").map((e,s)=>a.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:e},s))}),o.length>0&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(u,{className:"w-5 h-5"}),"Sumber & Referensi"]}),a.jsx("div",{className:"space-y-3",children:o.map((e,s)=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded",children:e.source_type.replace("_"," ").toUpperCase()}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["#",s+1]})]}),e.source_title&&a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.source_title}),e.source_author&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Oleh: ",e.source_author]}),e.source_description&&a.jsx("p",{className:"text-sm text-gray-600",children:e.source_description})]}),e.source_url&&a.jsx("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"ml-4 text-indonesia-red hover:text-indonesia-deep-red",children:a.jsx(u,{className:"w-4 h-4"})})]})},e.id))})]}),e.metadata&&Object.keys(e.metadata).length>0&&a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("details",{className:"group",children:[a.jsx("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer hover:text-gray-900",children:"Informasi Tambahan"}),a.jsx("div",{className:"mt-2 text-sm text-gray-600",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:JSON.stringify(e.metadata,null,2)})})]})})]})]})}var p=t(7489),g=t(5786),y=t(1291),b=t(8998),f=t(361),j=t(3734),v=t(7636);let N=(0,o.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var k=t(2714),w=t(4061),_=t(9635);function Z({story:e}){let s=(e=>{switch(e){case 0:return{color:"bg-red-100 text-red-700 border-red-200",icon:y.Z,text:"Baru Dipublikasikan",description:"Cerita baru yang belum diverifikasi"};case 1:return{color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:b.Z,text:"Menarik Perhatian",description:"Mendapat reaksi dari komunitas"};case 2:return{color:"bg-green-100 text-green-700 border-green-200",icon:f.Z,text:"Terverifikasi Lokal",description:"Dikonfirmasi oleh masyarakat setempat"};case 3:return{color:"bg-blue-100 text-blue-700 border-blue-200",icon:m.Z,text:"Didukung Sumber",description:"Memiliki referensi akademik atau dokumen"};case 4:return{color:"bg-purple-100 text-purple-700 border-purple-200",icon:j.Z,text:"Sangat Terpercaya",description:"Multipel verifikasi dan konsensus komunitas"};default:return{color:"bg-gray-100 text-gray-700 border-gray-200",icon:y.Z,text:"Belum Diverifikasi",description:"Status verifikasi tidak diketahui"}}})(e.trust_level||0),t=s.icon,r=Math.ceil(e.content.length/200);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsx("h1",{className:"text-3xl font-accent font-bold text-gray-900 mb-4 leading-tight",children:e.title}),e.summary&&a.jsx("p",{className:"text-lg text-gray-600 mb-6 leading-relaxed",children:e.summary}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:e.category?.icon}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Kategori"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.category?.name||"Umum"})]})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Lokasi"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.location.name})]})]}),e.time_period&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(N,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Periode"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.time_period})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Baca"}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[r," menit"]})]})]})]}),(0,a.jsxs)("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border ${s.color} mb-6`,children:[a.jsx(t,{className:"w-4 h-4"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-sm",children:s.text}),a.jsx("p",{className:"text-xs opacity-75",children:s.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(k.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.view_count||0," views"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(w.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.verification_count||0," verifications"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Dipublikasi ",(e=>{try{return(0,p.Q)(new Date(e),{addSuffix:!0,locale:g.id})}catch{return"Waktu tidak diketahui"}})(e.created_at||"")]})]})]}),e.author&&(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[a.jsx("div",{className:"w-10 h-10 bg-indonesia-gold rounded-full flex items-center justify-center overflow-hidden",children:e.author.avatar_url?a.jsx(c.default,{src:e.author.avatar_url,alt:e.author.full_name||"User",width:40,height:40,className:"object-cover"}):a.jsx(_.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.author.full_name||e.author.username}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.author.location&&a.jsx("span",{children:e.author.location}),(0,a.jsxs)("span",{children:[e.author.contribution_count||0," contributions"]}),(0,a.jsxs)("span",{children:["Trust score: ",e.author.trust_score||0]})]})]})]})]})}var S=t(4723),q=t(4064),C=t(2576);let T=(0,o.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),M=(0,o.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var P=t(7506);let U=(0,o.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var B=t(2777);let D=C.z.object({verificationType:C.z.string().min(1,"Pilih jenis verifikasi"),evidenceText:C.z.string().min(10,"Minimal 10 karakter untuk penjelasan"),evidenceUrl:C.z.string().url("URL tidak valid").optional().or(C.z.literal(""))});function L({story:e,user:s,onVerificationAdded:t}){let[i,n]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),o=(0,B.JU)(),d=e.verifications||[],{register:x,handleSubmit:u,formState:{errors:h},reset:y,setError:b}=(0,S.cI)({resolver:(0,q.F)(D)}),j=[{value:"local_confirmation",label:"Saya dari daerah ini",icon:v.Z,description:"Konfirmasi sebagai penduduk lokal"},{value:"source_verification",label:"Saya punya sumber",icon:m.Z,description:"Memiliki referensi akademik atau dokumen"},{value:"family_tradition",label:"Tradisi keluarga",icon:w.Z,description:"Cerita serupa dalam keluarga/komunitas"},{value:"visual_evidence",label:"Bukti visual",icon:T,description:"Foto, artifact, atau bukti fisik"},{value:"need_more_info",label:"Butuh info lebih",icon:M,description:"Perlu klarifikasi atau informasi tambahan"}],N=async a=>{if(s){n(!0);try{let{error:r}=await o.from("verifications").insert({story_id:e.id,user_id:s.id,verification_type:a.verificationType,evidence_text:a.evidenceText,evidence_url:a.evidenceUrl||null,is_verified:!1});if(r)throw r;await o.rpc("increment_verification_count",{story_id:e.id}),y(),c(!1),t()}catch(e){b("root",{message:"Failed to submit verification"})}finally{n(!1)}}},k=d.reduce((e,s)=>(e[s.verification_type]=(e[s.verification_type]||0)+1,e),{});return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(f.Z,{className:"w-5 h-5 text-green-600"}),"Verifikasi Komunitas"]}),a.jsx("div",{className:"space-y-3 mb-6",children:j.map(e=>{let s=k[e.value]||0,t=e.icon;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(t,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:e.label})]}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:s})]},e.value)})}),s?a.jsx("div",{className:"space-y-4",children:l?(0,a.jsxs)("form",{onSubmit:u(N),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Verifikasi"}),(0,a.jsxs)("select",{...x("verificationType"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",children:[a.jsx("option",{value:"",children:"Pilih jenis verifikasi"}),j.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))]}),h.verificationType&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.verificationType.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Penjelasan"}),a.jsx("textarea",{...x("evidenceText"),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",placeholder:"Jelaskan dasar verifikasi Anda..."}),h.evidenceText&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.evidenceText.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Bukti (Opsional)"}),a.jsx("input",{...x("evidenceUrl"),type:"url",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indonesia-red focus:border-transparent",placeholder:"https://example.com/evidence"}),h.evidenceUrl&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.evidenceUrl.message})]}),h.root&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:h.root.message})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{type:"submit",disabled:i,className:"flex-1 bg-indonesia-red text-white py-2 px-4 rounded-lg font-medium hover:bg-indonesia-deep-red transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i?a.jsx(P.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(U,{className:"w-4 h-4"}),"Kirim"]}),a.jsx("button",{type:"button",onClick:()=>{c(!1),y()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"})]})]}):a.jsx("button",{onClick:()=>c(!0),className:"w-full bg-indonesia-red text-white py-2 px-4 rounded-lg font-medium hover:bg-indonesia-deep-red transition-colors",children:"Tambah Verifikasi"})}):(0,a.jsxs)("p",{className:"text-sm text-gray-600 text-center py-4",children:[a.jsx("a",{href:"/auth",className:"text-indonesia-red hover:underline",children:"Masuk"})," ","untuk menambah verifikasi"]}),d.length>0&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Verifikasi Terbaru"}),a.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar",children:d.slice(0,5).map(e=>{let s=j.find(s=>s.value===e.verification_type),t=s?.icon||M;return(0,a.jsxs)("div",{className:"flex gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx(t,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:s?.label}),a.jsx("span",{className:"text-xs text-gray-500",children:(0,p.Q)(new Date(e.created_at||""),{addSuffix:!0,locale:g.id})})]}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.evidence_text}),e.evidence_url&&a.jsx("a",{href:e.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indonesia-red hover:underline",children:"Lihat bukti"})]})]},e.id)})})]})]})}var z=t(6021),E=t(6418);function A({currentStoryId:e,categoryId:s,locationId:t}){let[l,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)("category"),u=(0,n.useRouter)();(0,B.JU)();let h=e=>{u.push(`/stories/${e.id}`)},p=[{key:"category",label:"Kategori Serupa",icon:z.Z,disabled:!s},{key:"location",label:"Lokasi Sama",icon:v.Z,disabled:!t},{key:"recent",label:"Terbaru",icon:b.Z,disabled:!1}];return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cerita Terkait"}),a.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:p.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>!e.disabled&&m(e.key),disabled:e.disabled,className:`flex items-center gap-2 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${x===e.key?"border-indonesia-red text-indonesia-red":e.disabled?"border-transparent text-gray-400 cursor-not-allowed":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(s,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:e.label})]},e.key)})}),o?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"})},s))}):l.length>0?a.jsx("div",{className:"space-y-4",children:l.map(e=>a.jsx(E.E,{story:e,onClick:()=>h(e),compact:!0,showAuthor:!1},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:p.find(e=>e.key===x)?.icon&&i().createElement(p.find(e=>e.key===x).icon,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:["category"===x&&"Belum ada cerita lain dalam kategori ini","location"===x&&"Belum ada cerita lain dari lokasi ini","recent"===x&&"Belum ada cerita terbaru"]})]}),l.length>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsx("button",{onClick:()=>{"category"===x&&s?u.push(`/explore?category=${s}`):"location"===x&&t?u.push(`/explore?location=${t}`):u.push("/explore")},className:"w-full text-center text-sm text-indonesia-red hover:text-indonesia-deep-red font-medium py-2 hover:bg-red-50 rounded-lg transition-colors",children:"Lihat Semua Cerita"})})]})}var V=t(7484);let J=(0,o.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),R=(0,o.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function $(){let[e,s]=(0,r.useState)(null),[t,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null),d=(0,n.useParams)(),x=(0,n.useRouter)(),{user:m}=(0,V.a)(),u=(0,B.JU)(),p=d.id,g=async()=>{try{let{data:e,error:t}=await u.from("stories").select(`
          *,
          category:categories(*),
          location:locations(*),
          author:profiles(*),
          images:story_images(*),
          sources:story_sources(*),
          verifications:verifications(
            *,
            user:profiles(*)
          )
        `).eq("id",p).eq("status","published").single();if(t)throw t;s(e)}catch(e){o("Story not found"),console.error("Error loading story:",e)}finally{i(!1)}},y=async()=>{if(navigator.share&&e)try{await navigator.share({title:e.title,text:e.summary||e.content.substring(0,100)+"...",url:window.location.href})}catch(e){console.log("Share cancelled")}else navigator.clipboard.writeText(window.location.href)};return t?a.jsx(l.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(P.Z,{className:"w-8 h-8 animate-spin text-indonesia-red"})})}):c||!e?a.jsx(l.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Story Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The story you're looking for doesn't exist."}),a.jsx("button",{onClick:()=>x.push("/"),className:"bg-indonesia-red text-white px-4 py-2 rounded-lg hover:bg-indonesia-deep-red",children:"Back to Home"})]})})}):a.jsx(l.Z,{children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("button",{onClick:()=>x.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[a.jsx(J,{className:"w-4 h-4"}),"Back"]}),(0,a.jsxs)("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 text-indonesia-red border border-indonesia-red rounded-lg hover:bg-red-50",children:[a.jsx(R,{className:"w-4 h-4"}),"Share"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(Z,{story:e}),a.jsx(h,{story:e})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(L,{story:e,user:m,onVerificationAdded:g}),a.jsx(A,{currentStoryId:e.id,categoryId:e.category_id,locationId:e.location_id})]})]})]})})}},9970:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/bagoessprasetyo/Documents/react/unseenindonesia/src/app/stories/[id]/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[916,142,513,338],()=>t(8080));module.exports=a})();